<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: G Pages: 1 -->
<svg width="759pt" height="292pt"
 viewBox="0.00 0.00 758.50 292.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 288)">
<title>G</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-288 754.5,-288 754.5,4 -4,4"/>
<text text-anchor="middle" x="375.25" y="-268.8" font-family="Times,serif" font-size="14.00">registry.k8s.io diagram</text>
<!-- ExternalDataSources -->
<g id="node1" class="node">
<title>ExternalDataSources</title>
<polygon fill="none" stroke="black" points="219.5,-38 7.5,-38 7.5,0 219.5,0 219.5,-38"/>
<text text-anchor="middle" x="113.5" y="-22.8" font-family="Times,serif" font-size="14.00">External Data Sources</text>
<text text-anchor="middle" x="113.5" y="-7.8" font-family="Times,serif" font-size="14.00">(such as https://bgp.he.net)</text>
</g>
<!-- Datastore -->
<g id="node2" class="node">
<title>Datastore</title>
<polygon fill="none" stroke="black" points="227,-157 0,-157 0,-89 227,-89 227,-157"/>
<text text-anchor="middle" x="113.5" y="-141.8" font-family="Times,serif" font-size="14.00">Datastore</text>
<text text-anchor="middle" x="113.5" y="-126.8" font-family="Times,serif" font-size="14.00">(a SQL database</text>
<text text-anchor="middle" x="113.5" y="-111.8" font-family="Times,serif" font-size="14.00">or</text>
<text text-anchor="middle" x="113.5" y="-96.8" font-family="Times,serif" font-size="14.00">JSON files from a ConfigMap)</text>
</g>
<!-- Datastore&#45;&gt;ExternalDataSources -->
<g id="edge1" class="edge">
<title>Datastore&#45;&gt;ExternalDataSources</title>
<path fill="none" stroke="black" d="M113.5,-88.88C113.5,-75.84 113.5,-61 113.5,-48.45"/>
<polygon fill="black" stroke="black" points="117,-48.11 113.5,-38.11 110,-48.11 117,-48.11"/>
<text text-anchor="middle" x="163" y="-59.8" font-family="Times,serif" font-size="14.00">periodic fetch</text>
</g>
<!-- Implementation -->
<g id="node3" class="node">
<title>Implementation</title>
<polygon fill="none" stroke="black" points="475,-261 20,-261 20,-223 475,-223 475,-261"/>
<text text-anchor="middle" x="247.5" y="-245.8" font-family="Times,serif" font-size="14.00">Implementation (registry.k8s.io)</text>
<text text-anchor="middle" x="247.5" y="-230.8" font-family="Times,serif" font-size="14.00">(an Envoy go&#45;WASM or ArtifactServer based implementation)</text>
</g>
<!-- Implementation&#45;&gt;Datastore -->
<g id="edge2" class="edge">
<title>Implementation&#45;&gt;Datastore</title>
<path fill="none" stroke="black" d="M205.99,-222.89C196.48,-217.8 186.75,-211.78 178.5,-205 164.77,-193.72 151.98,-179.12 141.44,-165.43"/>
<polygon fill="black" stroke="black" points="143.97,-162.97 135.18,-157.06 138.36,-167.17 143.97,-162.97"/>
<text text-anchor="middle" x="258" y="-193.8" font-family="Times,serif" font-size="14.00">match IP to ASN</text>
<text text-anchor="middle" x="258" y="-178.8" font-family="Times,serif" font-size="14.00">ASN to cloud provider</text>
</g>
<!-- CloudProvider -->
<g id="node4" class="node">
<title>CloudProvider</title>
<polygon fill="none" stroke="black" stroke-dasharray="1,5" points="517.5,-141 245.5,-141 245.5,-105 517.5,-105 517.5,-141"/>
<text text-anchor="middle" x="381.5" y="-119.3" font-family="Times,serif" font-size="14.00">CloudProvider[n] container registry</text>
</g>
<!-- Implementation&#45;&gt;CloudProvider -->
<g id="edge3" class="edge">
<title>Implementation&#45;&gt;CloudProvider</title>
<path fill="none" stroke="black" d="M309.39,-222.92C319.5,-218.17 329.33,-212.27 337.5,-205 353.89,-190.42 365.35,-168.23 372.45,-150.76"/>
<polygon fill="black" stroke="black" points="375.84,-151.7 376.14,-141.11 369.3,-149.2 375.84,-151.7"/>
<text text-anchor="middle" x="556" y="-193.8" font-family="Times,serif" font-size="14.00">302 redirect</text>
<text text-anchor="middle" x="556" y="-178.8" font-family="Times,serif" font-size="14.00">point cloud provider at their hosted container registry</text>
</g>
<!-- CIP -->
<g id="node6" class="node">
<title>CIP</title>
<polygon fill="none" stroke="black" points="591.5,-37 383.5,-37 383.5,-1 591.5,-1 591.5,-37"/>
<text text-anchor="middle" x="487.5" y="-15.3" font-family="Times,serif" font-size="14.00">Container Image Promoter</text>
</g>
<!-- CloudProvider&#45;&gt;CIP -->
<g id="edge5" class="edge">
<title>CloudProvider&#45;&gt;CIP</title>
<path fill="none" stroke="black" d="M379,-104.98C377.83,-90.44 378.61,-69.75 389.5,-56 393.73,-50.65 398.84,-46.1 404.47,-42.22"/>
<polygon fill="black" stroke="black" points="406.32,-45.19 413.05,-37.01 402.69,-39.21 406.32,-45.19"/>
<text text-anchor="middle" x="468.5" y="-59.8" font-family="Times,serif" font-size="14.00">Promote an image 2/2</text>
</g>
<!-- K8sDotGCRDotIO -->
<g id="node5" class="node">
<title>K8sDotGCRDotIO</title>
<polygon fill="none" stroke="black" points="621,-141 536,-141 536,-105 621,-105 621,-141"/>
<text text-anchor="middle" x="578.5" y="-119.3" font-family="Times,serif" font-size="14.00">k8s.gcr.io</text>
</g>
<!-- K8sDotGCRDotIO&#45;&gt;CIP -->
<g id="edge4" class="edge">
<title>K8sDotGCRDotIO&#45;&gt;CIP</title>
<path fill="none" stroke="black" d="M574.84,-104.87C571.04,-90.46 563.87,-70.01 551.5,-56 547.02,-50.93 541.65,-46.41 535.94,-42.44"/>
<polygon fill="black" stroke="black" points="537.73,-39.43 527.42,-37 533.97,-45.33 537.73,-39.43"/>
<text text-anchor="middle" x="639.5" y="-59.8" font-family="Times,serif" font-size="14.00">Promote an image 1/2</text>
</g>
</g>
</svg>
