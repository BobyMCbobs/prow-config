<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: G Pages: 1 -->
<svg width="898pt" height="379pt"
 viewBox="0.00 0.00 897.50 379.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 375)">
<title>G</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-375 893.5,-375 893.5,4 -4,4"/>
<text text-anchor="middle" x="444.75" y="-355.8" font-family="Times,serif" font-size="14.00">registry.k8s.io diagram</text>
<!-- IngressTraffic -->
<g id="node1" class="node">
<title>IngressTraffic</title>
<ellipse fill="none" stroke="black" cx="227.5" cy="-330" rx="76.09" ry="18"/>
<text text-anchor="middle" x="227.5" y="-326.3" font-family="Times,serif" font-size="14.00">Ingress traffic</text>
</g>
<!-- Implementation -->
<g id="node4" class="node">
<title>Implementation</title>
<polygon fill="none" stroke="green" points="455,-261 0,-261 0,-223 455,-223 455,-261"/>
<text text-anchor="middle" x="227.5" y="-245.8" font-family="Times,serif" font-size="14.00">Implementation (registry.k8s.io)</text>
<text text-anchor="middle" x="227.5" y="-230.8" font-family="Times,serif" font-size="14.00">(an Envoy go&#45;WASM or ArtifactServer based implementation)</text>
</g>
<!-- IngressTraffic&#45;&gt;Implementation -->
<g id="edge2" class="edge">
<title>IngressTraffic&#45;&gt;Implementation</title>
<path fill="none" stroke="black" d="M227.5,-311.6C227.5,-300.06 227.5,-284.65 227.5,-271.36"/>
<polygon fill="black" stroke="black" points="231,-271.27 227.5,-261.27 224,-271.27 231,-271.27"/>
</g>
<!-- ExternalDataSources -->
<g id="node2" class="node">
<title>ExternalDataSources</title>
<polygon fill="none" stroke="black" points="240.5,-38 28.5,-38 28.5,0 240.5,0 240.5,-38"/>
<text text-anchor="middle" x="134.5" y="-22.8" font-family="Times,serif" font-size="14.00">External Data Sources</text>
<text text-anchor="middle" x="134.5" y="-7.8" font-family="Times,serif" font-size="14.00">(such as https://bgp.he.net)</text>
</g>
<!-- Datastore -->
<g id="node3" class="node">
<title>Datastore</title>
<polygon fill="none" stroke="black" points="248,-157 21,-157 21,-89 248,-89 248,-157"/>
<text text-anchor="middle" x="134.5" y="-141.8" font-family="Times,serif" font-size="14.00">Datastore</text>
<text text-anchor="middle" x="134.5" y="-126.8" font-family="Times,serif" font-size="14.00">(a SQL database</text>
<text text-anchor="middle" x="134.5" y="-111.8" font-family="Times,serif" font-size="14.00">or</text>
<text text-anchor="middle" x="134.5" y="-96.8" font-family="Times,serif" font-size="14.00">JSON files from a ConfigMap)</text>
</g>
<!-- Datastore&#45;&gt;ExternalDataSources -->
<g id="edge1" class="edge">
<title>Datastore&#45;&gt;ExternalDataSources</title>
<path fill="none" stroke="black" d="M134.5,-88.88C134.5,-75.84 134.5,-61 134.5,-48.45"/>
<polygon fill="black" stroke="black" points="138,-48.11 134.5,-38.11 131,-48.11 138,-48.11"/>
<text text-anchor="middle" x="184" y="-59.8" font-family="Times,serif" font-size="14.00">periodic fetch</text>
</g>
<!-- Implementation&#45;&gt;Datastore -->
<g id="edge3" class="edge">
<title>Implementation&#45;&gt;Datastore</title>
<path fill="none" stroke="black" d="M155.01,-222.83C147.38,-218.18 140.57,-212.34 135.5,-205 128.05,-194.23 125.89,-180.58 126.15,-167.57"/>
<polygon fill="black" stroke="black" points="129.66,-167.55 126.83,-157.34 122.68,-167.09 129.66,-167.55"/>
<text text-anchor="middle" x="216.5" y="-193.8" font-family="Times,serif" font-size="14.00">determine closest</text>
<text text-anchor="middle" x="216.5" y="-178.8" font-family="Times,serif" font-size="14.00">cloud provider from IP</text>
</g>
<!-- CloudProvider -->
<g id="node5" class="node">
<title>CloudProvider</title>
<polygon fill="none" stroke="black" stroke-dasharray="1,5" points="702.5,-141 430.5,-141 430.5,-105 702.5,-105 702.5,-141"/>
<text text-anchor="middle" x="566.5" y="-119.3" font-family="Times,serif" font-size="14.00">CloudProvider[n] container registry</text>
</g>
<!-- Implementation&#45;&gt;CloudProvider -->
<g id="edge4" class="edge">
<title>Implementation&#45;&gt;CloudProvider</title>
<path fill="none" stroke="black" d="M271.65,-222.83C280.8,-217.87 289.94,-211.92 297.5,-205 309.15,-194.35 303.51,-183.96 316.5,-175 335.48,-161.91 380.36,-151.03 426.94,-142.73"/>
<polygon fill="black" stroke="black" points="427.64,-146.16 436.9,-141 426.44,-139.27 427.64,-146.16"/>
<text text-anchor="middle" x="511" y="-193.8" font-family="Times,serif" font-size="14.00">302 redirect</text>
<text text-anchor="middle" x="511" y="-178.8" font-family="Times,serif" font-size="14.00">point cloud provider at their hosted container registry</text>
</g>
<!-- K8sDotGCRDotIO -->
<g id="node6" class="node">
<title>K8sDotGCRDotIO</title>
<polygon fill="none" stroke="black" points="774,-348 689,-348 689,-312 774,-312 774,-348"/>
<text text-anchor="middle" x="731.5" y="-326.3" font-family="Times,serif" font-size="14.00">k8s.gcr.io</text>
</g>
<!-- CIP -->
<g id="node7" class="node">
<title>CIP</title>
<polygon fill="none" stroke="black" points="835.5,-260 627.5,-260 627.5,-224 835.5,-224 835.5,-260"/>
<text text-anchor="middle" x="731.5" y="-238.3" font-family="Times,serif" font-size="14.00">Container Image Promoter</text>
</g>
<!-- K8sDotGCRDotIO&#45;&gt;CIP -->
<g id="edge5" class="edge">
<title>K8sDotGCRDotIO&#45;&gt;CIP</title>
<path fill="none" stroke="black" d="M731.5,-301.34C731.5,-291.38 731.5,-280.15 731.5,-270.22"/>
<polygon fill="black" stroke="black" points="728,-301.6 731.5,-311.6 735,-301.6 728,-301.6"/>
<polygon fill="black" stroke="black" points="735,-270.08 731.5,-260.08 728,-270.08 735,-270.08"/>
<text text-anchor="middle" x="810.5" y="-282.8" font-family="Times,serif" font-size="14.00">Promote an image 1/2</text>
</g>
<!-- CIP&#45;&gt;CloudProvider -->
<g id="edge6" class="edge">
<title>CIP&#45;&gt;CloudProvider</title>
<path fill="none" stroke="black" d="M729.96,-223.96C727.76,-209.2 722.43,-188.2 709.5,-175 696.66,-161.89 680.23,-152.14 663.11,-144.89"/>
<polygon fill="black" stroke="black" points="664.14,-141.53 653.55,-141.12 661.57,-148.04 664.14,-141.53"/>
<text text-anchor="middle" x="805.5" y="-186.3" font-family="Times,serif" font-size="14.00">Promote an image 2/2</text>
</g>
</g>
</svg>
